### Фичи для самостоятельного проектирования

Помимо основной части, вам также необходимо реализовать дополнительную функциональность.
Приступайте к её реализации сразу после успешного прохождения ревью основной части дипломного задания
(спланировать то, какую функциональность вы возьмёте и как будете с ней работать стоит ещё в начале работы над дипломом)
.

Обратите внимание, реализацию дополнительной функциональности нужно поместить в отдельную ветку.

Как именно реализовывать дополнительную фичу в коде, каким требованиям соответствовать,
как интегрировать в проект и API — вы решаете сами.
Вы можете выбрать любую функциональность из нашего списка или придумать свою.

Мы предлагаем следующие варианты.

- Комментарии

Возможность оставлять комментарии к событиям и модерировать их.

- Подписки

Первый вариант. Возможность подписываться на других пользователей и получать список актуальных событий, опубликованных
этими пользователями.

Второй вариант. Подписка на друзей и возможность получать список актуальных событий, в которых они принимают участие.

- Рейтинги

Возможность лайкать/дизлайкать событие. Формирование рейтинга мероприятий и рейтинга их авторов.
Возможность сортировки событий в зависимости от рейтингов.

- Администрирование

Первый вариант. Возможность для администратора добавлять конкретные локации — города,
театры, концертные залы и другие в виде координат (широта, долгота, радиус). Получение списка этих локаций.
Возможность поиска событий в конкретной локации.

<details><summary><b>Подсказка: функция для PostgreSQL для реализации работы с координатами</b></summary>
Эта функция принимает на вход координаты (градусы широты и долготы) двух точек и вычисляет дистанцию между ними.
Её можно использовать для упрощённой проверки, попадает ли локация проведения события в заданную область.
Если дистанция от локации события до центра окружности (выбранной области) не превышает радиус этой окружности,
значит, оно проходит в выборку.

    CREATE OR REPLACE FUNCTION distance(lat1 float, lon1 float, lat2 float, lon2 float)
        RETURNS float
    AS
    '
    declare
        dist float = 0;
        rad_lat1 float;
        rad_lat2 float;
        theta float;
        rad_theta float;
    BEGIN
        IF lat1 = lat2 AND lon1 = lon2
        THEN
            RETURN dist;
        ELSE
            -- переводим градусы широты в радианы
            rad_lat1 = pi() * lat1 / 180;
            -- переводим градусы долготы в радианы
            rad_lat2 = pi() * lat2 / 180;
            -- находим разность долгот
            theta = lon1 - lon2;
            -- переводим градусы в радианы
            rad_theta = pi() * theta / 180;
            -- находим длину ортодромии
            dist = sin(rad_lat1) * sin(rad_lat2) + cos(rad_lat1) * cos(rad_lat2) * cos(rad_theta);

            IF dist > 1
                THEN dist = 1;
            END IF;

            dist = acos(dist);
            -- переводим радианы в градусы
            dist = dist * 180 / pi();
            -- переводим градусы в километры
            dist = dist * 60 * 1.8524;

            RETURN dist;
        END IF;
    END;
    '
    LANGUAGE PLPGSQL;

</details>

Второй вариант. Улучшение модерации событий администратором — возможность выгружать все события, ожидающие модерации,
делать их проверку и оставлять комментарий для инициатора события, если оно не прошло модерацию.
При этом инициатору дать возможность исправить замечания и отправить событие на повторную модерацию.

Обратите внимание, вам нужно реализовать только одну дополнительную функциональность.
Выбирайте её в зависимости от вашего уровня владения Java, времени на диплом и внутренних ресурсов.

**Как работать с функциональностью**

После выбора функциональности не бросайтесь сразу в её реализацию. Продумайте сценарии её использования и ограничения.
Вот примеры вопросов по каждой из фич, на которые лучше найти ответы до того, как приступать к написанию кода.

1. Комментирование: Может ли пользователь, оставивший комментарий, отредактировать его позже?
2. Подписка на пользователей: Могут ли пользователи запрещать подписку на себя?
3. Подписка на друзей: Показывать ли все события друзьям или дать возможность делиться/скрывать выбранные?
4. Рейтинг: Показывать ли рейтинг события/пользователя публично?
   Разрешить лайкать/дизлайкать любые события или только посещённые?
5. Локации: Ограничивать ли пользователей при добавлении события только заданными в системе локациями?
6. Модерация: Как повлияет на модерацию жизненный цикл события от создания до его проведения?

**\* Задача со звёздочкой — тесты**

Это необязательное задание. Однако вы уже знаете на собственном опыте, что разработчики не могут не ошибаться,
и поэтому код нужно обязательно покрывать тестами, чтобы находить ошибки и несоответствия как можно раньше.
Реализуйте модульные тесты для проверки функциональности вашего проекта.
Это потребует времени, но также принесёт ощутимый результат.